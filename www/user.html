<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>
    <script src="./ajax.js"></script>
    <script>
        window.onload = function(){
        var oUser = document.getElementById('user');
        var oPass = document.getElementById('pass');
        var oReg = document.getElementById('reg_btn');
        var oLogin = document.getElementById('login_btn');

        oLogin.onclick = function(){
            ajax({
                url:'/user',
                data:{act:'login',user:oUser.value,pass:oPass.value},
                type:'get',
                success:function(str){
                    var json = eval('('+str+')');

                    if(json.ok){
                        alert('登录成功');
                    }else{
                        alert('登录失败'+json.msg);
                    }
                },
                error:function(){
                    alert('通信错误');
                }
            });
        };

        oReg.onclick = function(){
            ajax({
                url:'/user',
                data:{act:'reg',user:oUser.value,pass:oPass.value},
                type:'get',
                success:function(str){
                    var json = eval('('+str+')');

                    if(json.ok){
                        alert('注册成功');
                    }else{
                        alert('注册失败'+json.msg);
                    }
                },
                error:function(){
                    alert('通信错误');
                }
            });
        };
        };
    </script>
</head>
<body>
        用户：<input type="text" id="user"><br>
        密码：<input type="password" id="pass"><br>
        <input type="button" id="reg_btn"  value="注册">
        <input type="button"  id="login_btn" value="登录">
    
</body>
</html>